<div id="addMenuModal" class="modal fade show" tabindex="-1" style="display: block" aria-modal="true" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content border-0">
            <div class="card-header align-items-center d-flex">
                <h4 class="card-title mb-0 flex-grow-1">
                    {{ "sys3.userDetail.title" | translate }}
                </h4>
                <button type="button" class="btn-close" mat-button mat-dialog-close (click)="onCancel()"></button>
            </div>

            <div class="card-body" style="max-height: 700px; overflow-y: scroll">
                <form #myForm="ngForm">
                    <div class="row mb-3">
                        <div class="col-lg-3">
                            <label for="username" class="form-label-inline">{{
                                "sys3.userDetail.userId" | translate
                                }}<span class="text-danger"> *</span></label>
                        </div>
                        <div class="col-lg-9">
                            <input [disabled]="disable" type="text" required class="form-control " id="username" placeholder="{{'sys3.userDetail.placeholderUserName' | translate}}" name="username" minlength="4" [(ngModel)]="tsstUser.userId" #userName="ngModel" [ngClass]="{ 'is-invalid': (userName.invalid && submitted) || (userName.invalid && (userName.dirty || userName.touched))}"
                            />
                            <div class="invalid-error" *ngIf="(userName.invalid && submitted) || userName.invalid && (email.dirty || userName.touched)">
                                <span *ngIf="userName.errors?.['required']">{{ 'message.requiredUsername' | translate
                                    }}</span>
                                <span *ngIf="userName.errors?.['minlength']">{{'message.requiredMin' |
                                        translate }}</span>
                            </div>
                        </div>
                    </div>

                    <ng-container *ngIf="
              tsstUser.userUid === undefined
          ">
                        <div class="row mb-3">
                            <div class="col-lg-3">
                                <label for="password" class="form-label-inline">{{
                                    "sys3.userDetail.pwd" | translate
                                    }}<span class="text-danger"> *</span></label>
                            </div>
                            <div class="col-lg-9">
                                <input type="password" required class="form-control " id="password" name="password" placeholder="{{'sys3.userDetail.placeholderPassword'| translate}}" [(ngModel)]="tsstUser.password" #password="ngModel" [ngClass]="{ 'is-invalid': (password.invalid && submitted) || (password.invalid && (password.dirty || password.touched))}"
                                />
                                <div class="invalid-error" *ngIf="(password.invalid && submitted) || password.invalid && (password.dirty || password.touched)">
                                    <span *ngIf="password.errors?.['required']">{{ 'message.requiredPassword' | translate
                                        }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-lg-3">
                                <label for="confirmPassword" class="form-label-inline">{{
                                    "sys3.userDetail.Cpwd" | translate
                                    }}<span class="text-danger"> *</span></label>
                            </div>
                            <div class="col-lg-9">
                                <input type="Password" required class="form-control " id="confirmPassword" placeholder="{{'sys3.userDetail.placeholderConfirmPassword' | translate}}" name="confirmPassword" [(ngModel)]="tsstUser.confirmPassword" [pattern]=" password.value" #confirmPassword="ngModel"
                                    [ngClass]="{ 'is-invalid': (confirmPassword.invalid && submitted) || (confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched))}" />
                                <div class="invalid-error" *ngIf="(confirmPassword.invalid && submitted) || confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)">
                                    <span *ngIf="confirmPassword.errors?.['required']">{{ 'message.requiredConfirmPassword' |
                                        translate }}</span>
                                    <span *ngIf="confirmPassword.errors?.['pattern']"> {{'message.MatchPassword' |
                                        translate }}</span>
                                </div>
                            </div>
                        </div>
                    </ng-container>

                    <ng-container *ngIf="
              tsstUser.userUid !== undefined
          ">
                        <div class="row mb-3">
                            <div class="col-lg-3">
                                <label for="newPassword" class="form-label-inline" >{{
                                    "sys3.userDetail.pwd" | translate
                                    }}<span class="text-danger" [hidden]="!changePassword"> *</span></label>
                            </div>

                            <div class="col-lg-3" [hidden]="changePassword" style="margin-top: auto; margin-bottom: auto;">
                                <button (click)="changePassword = !changePassword" class="btn btn-sm rounded-pill btn-success btn-label waves-effect right waves-light verticle-align">
                                    <i class="ri-pencil-fill label-icon align-middle fs-8 ms-2"></i>
                                    {{"button.changePassword.title" | translate}}</button>

                            </div>
                            <div *ngIf="changePassword" class="col-lg-9 row" style="margin-left: 0px; padding-right: 0px; margin-bottom: auto; margin-top: auto;">
                            <div class="col-lg-6"  style="padding-left: 0; ">
                                <input type="password"  required class="form-control " id="newPassword" placeholder="{{'sys3.userDetail.placeholderPassword' | translate}}" name="newPassword" [(ngModel)]="tsstUser.newPassword" #newPassword="ngModel" [ngClass]="{ 'is-invalid': (newPassword.invalid && submitted) || (newPassword.invalid && (newPassword.dirty || newPassword.touched))}"
                                />
                                <div class="invalid-error" *ngIf="(newPassword.invalid && submitted) || newPassword.invalid && (newPassword.dirty || newPassword.touched)">
                                    <span *ngIf="newPassword.errors?.['required']">{{ 'message.requiredPassword' |
                                        translate }}</span>
                                </div>
                            </div>

                            <div class="col-lg-6" >
                                <input type="password" style="padding-right: 0px" required class="form-control " id="ConfirmPassword" placeholder="{{'sys3.userDetail.placeholderConfirmPassword' | translate}}" name="ConfirmPassword"  [(ngModel)]="tsstUser.confirmPassword" #confirmPassword="ngModel"  [pattern]="newPassword.value "
                                    [ngClass]="{ 'is-invalid': (confirmPassword.invalid && submitted) || (confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched))}" />
                                <div class="invalid-error"  *ngIf="(confirmPassword.invalid && submitted) || confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)">
                                    <span *ngIf="confirmPassword.errors?.['required']">{{ 'message.requiredConfirmPassword' |
                                        translate }}</span>
                                    <span *ngIf="confirmPassword.errors?.['pattern']"> {{'message.MatchPassword' |
                                            translate }}</span>
                                </div>
                            </div>
                        </div>


                        </div>
                    </ng-container>

                    <div class="row mb-3">
                        <div class="col-lg-3">
                            <label for="fullName" class="form-label-inline">{{
                                "sys3.userDetail.fullName" | translate
                                }}<span class="text-danger"> *</span></label>
                        </div>
                        <div class="col-lg-9">
                            <input type="text" required class="form-control " id="fullName" name="fullName" minlength="4" placeholder="{{'sys3.userDetail.placeholderFullName' | translate}}" [(ngModel)]="tsstUser.tsstUserInfo.fullName" #fullName="ngModel" [ngClass]="{ 'is-invalid': (fullName.invalid && submitted) || (fullName.invalid && (fullName.dirty || fullName.touched))}"
                            />
                            <div class="invalid-error" *ngIf="(fullName.invalid && submitted) || fullName.invalid && (fullName.dirty || fullName.touched)">
                                <span *ngIf="fullName.errors?.['required']">{{ 'message.requiredFullName' | translate
                                    }}</span>
                                <span *ngIf="fullName.errors?.['minlength']">{{'message.requiredMin' |
                                        translate }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-lg-3">
                            <label for="dob" class="form-label-inline">{{
                                "sys3.userDetail.dob" | translate
                                }}</label>
                        </div>
                        <div class=" col-lg-9">
                            <div class="form-icon right ">
                                <p-calendar placeholder="{{'common.template.dateformat' | translate}}" [(ngModel)]="tsstUser.tsstUserInfo.dob" name="dob" #dob="ngModel" dateFormat="{{'common.template.dateformat' | translate}}" [readonlyInput]="true" appendTo="body"> </p-calendar>
                                <i class="ri-calendar-2-fill"></i>
                            </div>
                            <!-- <input type="date" class="form-control" id="dob" name="dob" [(ngModel)]="tsstUser.tsstUserInfo.dob" #dob="ngModel">
                            {{tsstUser.tsstUserInfo.dob|date}} -->
                        </div>

                    </div>
                    <div class="row mb-3">
                        <div class="col-lg-3">
                            <label for="email" class="form-label-inline">{{
                                "sys3.userDetail.email" | translate
                                }}<span class="text-danger"> *</span></label>
                        </div>
                        <div class="col-lg-9">
                            <input type="text" required class="form-control " id="email" name="email" placeholder="{{'sys3.userDetail.placeholderEmailAddress' | translate}}" [(ngModel)]="tsstUser.tsstUserInfo.email" #email="ngModel" [pattern]="emailPattern" [ngClass]="{ 'is-invalid': (email.invalid && submitted) || (email.invalid && (email.dirty || email.touched))}"
                            />
                            <div class="invalid-error" *ngIf="(email.invalid && submitted) || email.invalid && (email.dirty || email.touched)">
                                <span *ngIf="email.errors?.['required']">{{ 'message.requiredEmail' | translate
                                    }}</span>
                                <span *ngIf="email.errors?.['pattern']">{{'message.requiredFormatEmail' | translate
                                    }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-lg-3">
                            <label for="address1ControlTextarea" class="form-label-inline">{{
                                "sys.homeAddress" | translate
                                }}</label>
                        </div>
                        <div class="col-lg-9">
                            <textarea class="form-control" rows="3" placeholder="{{'sys3.userDetail.placeholderAddress' | translate}}" id="address" name="address" [(ngModel)]="tsstUser.tsstUserInfo.address" #address="ngModel"></textarea>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-lg-3">
                            <label for="cellPhone" class="form-label-inline">{{
                                "sys3.userDetail.CellPhone" | translate
                                }}</label>
                        </div>
                        <div class="col-lg-9">
                            <input type="text" class="form-control " id="cellPhone" name="cellPhone" placeholder="{{'sys3.userDetail.placeholderCellPhone' | translate}}" [(ngModel)]="tsstUser.tsstUserInfo.cellPhone" #phone="ngModel" [pattern]="phonePattern" [ngClass]="{ 'is-invalid': (phone.invalid && submitted) || (phone.invalid && (phone.dirty || phone.touched))}" />
                            <div class="invalid-error" *ngIf="phone.invalid && submitted">
                                <!-- <span *ngIf="phone.errors?.['required']">{{ 'message.requiredMessage' | translate }}</span> -->
                                <span *ngIf="phone.errors?.['pattern']">{{'message.requiredFormatPhone' | translate
                                    }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-lg-3">
                            <label for="gender" class="form-label">{{
                                "sys3.userDetail.gender" | translate
                                }}</label>
                        </div>
                        <div class="col-lg-9">
                            <span class="form-check form-check-inline">
                                <label class="form-check-label" for="male">
                                    {{"sys.user.male" | translate }}
                                </label>
                                <input class="form-check-input" type="radio" name="gender" id="male"
                                    (change)="tsstUser.tsstUserInfo.gender  = true"
                                    [checked]="tsstUser.tsstUserInfo.gender == true">
                            </span>
                            <span class="form-check form-check-inline">
                                <label class="form-check-label" for="female">
                                    {{"sys.user.female" | translate }}
                                </label>
                                <input class="form-check-input" type="radio" name="gender" id="female"
                                    (change)="tsstUser.tsstUserInfo.gender  = false"
                                    [checked]="tsstUser.tsstUserInfo.gender == false">
                            </span>
                        </div>
                    </div>

                    <!-- <div class="row mb-3">
                        <div class="col-lg-3">
                            <label for="organization" class="form-label-inline">{{
                                "sys3.userDetail.organization" | translate
                                }}</label>
                        </div>
                        <div class="col-lg-9">
                            <input type="text" class="form-control " id="organization" name="organization" placeholder="{{'sys3.userDetail.placeholderOrganization' | translate}}" [(ngModel)]="tsstUser.tsstUserInfo.organization" #url="ngModel" />
                        </div>
                    </div> -->
<!--
                    <div class="row mb-3">
                        <div class="col-lg-3">
                            <label for="position" class="form-label-inline">{{
                                "sys3.userDetail.position" | translate
                                }}<span class="text-danger"> *</span></label>
                        </div>
                        <div class="col-lg-9">
                            <p-dropdown appendTo="body" placeholder="{{'sys3.userDetail.placeholderPosition' | translate}}" [required]="true" [options]="position" [(ngModel)]="tsstUser.tsstUserInfo.position" optionLabel="commNm" optionValue="commNm" [ngModelOptions]="{ standalone: true }"
                                #Position="ngModel" [ngClass]="{ 'ng-invalid ng-dirty': (Position.invalid && submitted) || Position.invalid && (Position.dirty || Position.touched)}"></p-dropdown>
                            <div class="invalid-error" *ngIf="(Position.invalid && submitted) || Position.invalid && (Position.dirty || Position.touched)">
                                <span *ngIf="Position.errors?.['required']">{{ 'message.requiredPosition' | translate
                                    }}</span>
                            </div>
                        </div>
                    </div> -->


                    <div class="row mb-3" [hidden]="!disable">
                        <div class="col-lg-3">
                            <label for="status-user" class="form-label-inline">{{
                                "sys3.userDetail.status" | translate
                                }}</label>
                        </div>

                        <div class="col-lg-9">
                            <span class="form-check form-check-inline">
                                <label class="form-check-label" for="active">
                                    {{"sys.sys0103.status.active" | translate }}
                                </label>
                                <input class="form-check-input" type="radio" name="status" id="active"
                                    (change)="tsstUser.status  = true" [checked]="tsstUser.status == true">
                            </span >
                            <span class="form-check form-check-inline">
                                <label class="form-check-label" for="disable">
                                    {{"sys.sys0103.status.blocked" | translate }}
                                </label>
                                <input class="form-check-input" type="radio" name="status" id="disable"
                                    (change)="tsstUser.status  = false" [checked]="tsstUser.status == false">
                            </span>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light" mat-button mat-dialog-close (click)="onCancel()">
                    {{ "sys3.userDetail.buttonCancel" | translate }}
                </button>
                <button type="button" class="btn btn-primary" (click)="onSave(myForm.invalid)">
                    {{ "sys3.userDetail.buttonSave" | translate }}
                </button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
